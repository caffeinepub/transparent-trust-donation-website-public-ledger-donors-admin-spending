{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 43,
  "summary": "Build a transparent, globally accessible trust donation website to collect funds indefinitely and publicly show total funds, all transactions, usage of funds, and donor/member contribution details.",
  "architectural_notes": [
    "Trust/organization name set to: \"Why Not Us ?\"",
    "Do not generate new branding images; use only the user-supplied trust image as the site’s primary visual asset.",
    "All currency amounts should be formatted and displayed in INR (₹).",
    "Add a mechanism to track and display Total Views and Live Viewers on the public site header (requires defining how views/live viewers are measured and stored).",
    "Donation confirmation notifications via WhatsApp/email require external messaging integration and enabled email capability; treat as a separate dependency-gated feature.",
    "Donor phone number privacy rule: only host/admin can view full number; for other users display a masked number like 98765****** (show first 5 digits, mask the remaining digits).",
    "Total Views metric should represent the cumulative all-time (website history) view count and must monotonically increase over time (not reset per session/page load).",
    "Default phone dial/country code for contact number inputs should be set to +91 (India).",
    "Total Views and Live Viewers metrics must be publicly visible to everyone (no login required) wherever they are displayed (e.g., site header).",
    "Donation flow requirement: donor mobile number must be mandatory (not optional) for both anonymous and authenticated donations."
  ],
  "known_issues": [
    "Automated build/implementation attempts for requirements 1–4 failed multiple times (\"AI couldn't implement\")—may require simplifying scope or breaking into smaller tasks.",
    "Total Views counter is not increasing (remains 0 on the public site), indicating the view-tracking/persistence logic or update mechanism is not functioning.",
    "User reports metric inconsistency: Live Viewers shows ~40 while Total Views is not correspondingly higher; suggests Total Views not incrementing correctly and/or Live Viewers is inflated/miscalculated.",
    "Recent deployment attempt failed due to a system-side deployment/build error; changes did not go live.",
    "Currency is still displaying in dollars instead of INR (₹) across the site (user reports INR formatting changes did not take effect).",
    "Default phone dial/country code is not set to +91 in the phone number inputs (user reports +91 changes did not take effect).",
    "Admin cannot currently view the list/details of members/visitors who viewed the site; only aggregate view counts are visible.",
    "UPI “Scan to Pay” QR is not working with the currently deployed/old QR image; user will provide a replacement QR image to swap in.",
    "Mobile donation flow intermittently fails: on mobile, entering an amount sometimes cannot complete donation and the transaction fails.",
    "UPI “Scan to Pay” QR code is still not working (still failing to scan/pay on mobile)."
  ],
  "isFixRequest": true,
  "imageRequirements": "## Edit Images\n- Replace the UPI QR code image with the newly uploaded QR design (upi-qr.dim_800x800.jpg > upi-qr.dim_800x800.jpg)",
  "existing_features": [
    {
      "id": "feature-add-admin-authorization-to-restrict-who-can-create-edit-outgoing-spending-usage-records-and-if-applicable-manage-donor-records-admin-access-must-be-based-on-internet-identity-principal-allowlisting-stored-in-canister-state",
      "title": "Add admin authorization to restrict who can create/edit outgoing spending/usage records and (if applicable) manage donor records; admin access must be based on Internet Identity principal allowlisting stored in canister state.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-public-transparency-dashboard-ui-that-shows-total-funds-current-balance-totals-in-out-recent-transactions-and-breakdown-of-outgoing-spending-by-category-purpose",
      "title": "Create a public Transparency Dashboard UI that shows: total funds (current balance), totals in/out, recent transactions, and breakdown of outgoing spending by category/purpose.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-public-transaction-ledger-ui-that-lists-all-incoming-and-outgoing-transactions-with-filtering-incoming-outgoing-category-and-sorting-newest-oldest-and-supports-viewing-a-transaction-s-full-details",
      "title": "Create a public Transaction Ledger UI that lists all incoming and outgoing transactions with filtering (incoming/outgoing/category) and sorting (newest/oldest), and supports viewing a transaction’s full details.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-public-donor-member-listing-ui-that-shows-each-contributor-s-details-and-contribution-totals-with-a-donor-detail-view-showing-the-donor-s-contribution-history",
      "title": "Create a public Donor/Member Listing UI that shows each contributor’s details and contribution totals, with a donor detail view showing the donor’s contribution history.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-donation-flow-that-allows-supporters-worldwide-to-contribute-and-have-the-contribution-recorded-on-the-public-ledger-including-a-donor-identity-option-signed-in-via-internet-identity-and-an-anonymous-option",
      "title": "Add a Donation flow that allows supporters worldwide to contribute and have the contribution recorded on the public ledger, including a donor identity option (signed-in via Internet Identity) and an anonymous option.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-management-ui-for-authorized-admins-to-create-outgoing-spending-usage-records-purpose-category-amount-description-date-time-optional-attachment-reference-text-and-optionally-correct-mistakes-via-a-clear-audit-friendly-approach",
      "title": "Add an Admin Management UI for authorized admins to create outgoing spending/usage records (purpose/category, amount, description, date/time, optional attachment/reference text) and (optionally) correct mistakes via a clear audit-friendly approach.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-website-is-designed-and-implemented-to-operate-indefinitely-no-built-in-expiration-time-period-logic-and-is-publicly-accessible-without-requiring-login-for-viewing-transparency-information",
      "title": "Ensure the website is designed and implemented to operate indefinitely (no built-in expiration/time period logic) and is publicly accessible without requiring login for viewing transparency information.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-distinctive-visual-theme-across-the-site-colors-typography-spacing-component-styling-suitable-for-a-global-charitable-trust-transparency-platform-avoiding-default-looking-template-styling",
      "title": "Apply a coherent, distinctive visual theme across the site (colors, typography, spacing, component styling) suitable for a global charitable trust transparency platform, avoiding default-looking template styling.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-and-include-required-static-images-logo-and-a-simple-hero-illustration-and-render-them-as-static-assets-from-frontend-public-assets-generated-not-served-via-the-backend",
      "title": "Generate and include required static images (logo and a simple hero illustration) and render them as static assets from frontend/public/assets/generated (not served via the backend).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-user-visible-branding-text-that-currently-names-the-trust-as-hope-trust-to-instead-display-the-trust-name-exactly-as-why-not-us",
      "title": "Update all user-visible branding text that currently names the trust as “Hope Trust” to instead display the trust name exactly as: “Why Not Us ?”.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-html-document-title-to-use-the-trust-name-why-not-us-so-the-browser-tab-reflects-the-new-trust-branding",
      "title": "Update the HTML document title to use the trust name “Why Not Us ?” so the browser tab reflects the new trust branding.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-update-any-non-ui-default-identifiers-derived-from-the-old-trust-name-e-g-fallback-strings-used-when-window-location-hostname-is-unavailable-to-align-with-why-not-us-branding",
      "title": "Update any non-UI default identifiers derived from the old trust name (e.g., fallback strings used when window.location.hostname is unavailable) to align with “Why Not Us ?” branding.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-ui-element-at-the-top-of-the-website-in-the-sticky-header-area-that-displays-total-views-and-live-viewers-and-keep-the-live-viewers-value-updated-while-the-page-is-open",
      "title": "Add a UI element at the top of the website (in the sticky header area) that displays Total Views and Live Viewers, and keep the Live Viewers value updated while the page is open.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-add-react-query-hooks-and-any-required-frontend-types-for-the-new-view-metrics-endpoints-and-reuse-them-in-the-header-component",
      "title": "Add React Query hooks (and any required frontend types) for the new view metrics endpoints and reuse them in the header component.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-donor-views-to-display-masked-phone-numbers-for-non-admin-viewers-and-full-phone-numbers-only-for-admins-including-the-donor-detail-page-where-the-phone-number-is-currently-rendered",
      "title": "Update the frontend donor views to display masked phone numbers for non-admin viewers and full phone numbers only for admins, including the donor detail page where the phone number is currently rendered.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-site-uses-only-the-single-user-uploaded-donations-photo-with-the-why-not-us-logo-as-its-image-asset-across-the-ui-remove-replace-any-references-to-other-generated-or-placeholder-images-for-example-the-current-dashboard-hero-image-at-assets-generated-trust-hero-dim-1600x600-png-so-that-no-other-images-are-used",
      "title": "Ensure the site uses ONLY the single user-uploaded donations photo with the “Why Not Us” logo as its image asset across the UI. Remove/replace any references to other generated or placeholder images (for example, the current dashboard hero image at \"/assets/generated/trust-hero.dim_1600x600.png\") so that no other images are used.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-frontend-view-registration-so-that-calling-incrementsiteviews-reliably-happens-after-the-backend-actor-is-available-and-is-retried-handled-gracefully-if-the-actor-is-not-ready-on-first-render-so-total-views-is-not-stuck-at-0-due-to-an-early-failed-mutation",
      "title": "Fix frontend view-registration so that calling `incrementSiteViews()` reliably happens after the backend actor is available, and is retried/handled gracefully if the actor is not ready on first render (so Total Views is not stuck at 0 due to an early failed mutation).",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-correct-the-live-viewer-tracking-loop-so-it-does-not-artificially-inflate-currentliveviewers-by-repeatedly-calling-viewerconnected-on-a-heartbeat-timer-implement-a-heartbeat-that-maintains-liveness-without-incrementing-the-count-or-make-the-backend-live-viewer-registration-idempotent-per-session-so-repeated-calls-do-not-increase-the-count",
      "title": "Correct the live-viewer tracking loop so it does not artificially inflate `currentLiveViewers` by repeatedly calling `viewerConnected()` on a heartbeat timer. Implement a heartbeat that maintains liveness without incrementing the count, or make the backend live-viewer registration idempotent per session so repeated calls do not increase the count.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-make-live-viewers-tracking-session-based-and-idempotent-so-repeated-calls-from-the-same-browser-tab-session-do-not-increase-the-count-and-stale-sessions-are-removed-automatically-to-prevent-inflated-live-viewers",
      "title": "Make Live Viewers tracking session-based and idempotent so repeated calls from the same browser tab/session do not increase the count, and stale sessions are removed automatically to prevent inflated Live Viewers.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-view-live-view-tracking-to-use-the-session-id-already-stored-in-sessionstorage-and-to-call-the-correct-backend-session-based-endpoints-connect-heartbeat-disconnect-so-live-viewers-stays-accurate-and-total-views-updates-are-reflected-in-the-ui",
      "title": "Update frontend view/live-view tracking to use the session ID already stored in sessionStorage and to call the correct backend session-based endpoints (connect + heartbeat + disconnect) so Live Viewers stays accurate and Total Views updates are reflected in the UI.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-view-live-view-tracking-to-match-the-backend-s-session-based-endpoints-use-the-session-id-stored-in-sessionstorage-under-viewer-session-id-call-the-backend-connect-endpoint-once-per-session-call-the-heartbeat-endpoint-on-an-interval-while-the-page-is-open-visible-and-call-the-disconnect-endpoint-on-unload-pagehide-visibility-hidden-without-inflating-counts",
      "title": "Update frontend view/live-view tracking to match the backend’s session-based endpoints: use the session ID stored in `sessionStorage` under `viewer_session_id`, call the backend connect endpoint once per session, call the heartbeat endpoint on an interval while the page is open/visible, and call the disconnect endpoint on unload/pagehide/visibility hidden, without inflating counts.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-any-frontend-typescript-build-issues-in-frontend-src-hooks-useviewtracking-ts-that-can-cause-deployment-build-to-fail-e-g-browser-incompatible-timeout-typing-while-preserving-the-existing-retry-behavior-for-registering-total-views",
      "title": "Fix any frontend TypeScript/build issues in `frontend/src/hooks/useViewTracking.ts` that can cause deployment/build to fail (e.g., browser-incompatible timeout typing), while preserving the existing retry behavior for registering Total Views.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-currency-formatting-across-the-frontend-to-display-indian-rupees-using-the-symbol-and-indian-number-formatting-replacing-all-current-based-formatting-used-for-donations-spending-totals-and-charts",
      "title": "Update all currency formatting across the frontend to display Indian Rupees using the ₹ symbol (and Indian number formatting), replacing all current $-based formatting used for donations, spending, totals, and charts.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-user-facing-text-labels-and-descriptions-that-mention-usd-dollars-to-instead-mention-inr-rupees-english-text-including-donation-spending-form-labels-and-ledger-descriptive-text",
      "title": "Update all user-facing text labels and descriptions that mention USD/dollars to instead mention INR/rupees (English text), including donation/spending form labels and ledger descriptive text.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-user-phone-number-inputs-so-the-default-country-dial-code-is-91-india-including-a-anonymous-donation-phone-input-in-frontend-src-components-donate-donationform-tsx-and-b-authenticated-profile-setup-phone-input-in-frontend-src-components-auth-profilesetupmodal-tsx-this-includes-updating-the-placeholder-text-to-show-a-91-example-and-when-the-phone-field-is-empty-pre-filling-the-input-value-with-the-91-prefix-so-users-start-with-the-india-dial-code-by-default",
      "title": "Update all user phone-number inputs so the default country dial code is +91 (India), including: (a) anonymous donation phone input in `frontend/src/components/donate/DonationForm.tsx`, and (b) authenticated profile setup phone input in `frontend/src/components/auth/ProfileSetupModal.tsx`. This includes updating the placeholder text to show a +91 example and (when the phone field is empty) pre-filling the input value with the \"+91\" prefix so users start with the India dial code by default.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-site-metrics-total-views-and-live-viewers-are-publicly-visible-to-everyone-including-anonymous-non-logged-in-visitors-and-are-not-gated-behind-admin-checks-or-login-requirements",
      "title": "Ensure the site metrics (\"Total Views\" and \"Live Viewers\") are publicly visible to everyone (including anonymous/non-logged-in visitors) and are not gated behind admin checks or login requirements.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-frontend-currency-formatting-so-every-displayed-monetary-amount-uses-indian-rupees-formatting-indian-digit-grouping-and-does-not-show-usd-anywhere-in-the-ui",
      "title": "Update all frontend currency formatting so every displayed monetary amount uses Indian Rupees formatting (₹, Indian digit grouping) and does not show USD/$ anywhere in the UI.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-set-the-default-phone-dial-code-to-91-india-in-all-phone-number-input-fields-including-anonymous-donation-and-authenticated-profile-setup-by-pre-filling-91-when-the-field-is-empty-and-updating-placeholder-examples-to-a-91-format",
      "title": "Set the default phone dial code to +91 (India) in all phone number input fields, including anonymous donation and authenticated profile setup, by pre-filling \"+91\" when the field is empty and updating placeholder examples to a +91 format.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-make-donor-mobile-number-mandatory-for-all-donations-anonymous-and-authenticated-and-block-submission-when-the-phone-field-is-missing-or-only-contains-the-default-91-prefix",
      "title": "Make donor mobile number mandatory for all donations (anonymous and authenticated), and block submission when the phone field is missing or only contains the default \"+91\" prefix.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-upi-payment-step-to-the-donation-flow-so-donors-can-pay-the-exact-entered-amount-via-upi-then-submit-the-donation-along-with-a-upi-transaction-reference-utr-transaction-id-that-admins-can-verify-before-confirming",
      "title": "Add a UPI payment step to the donation flow so donors can pay the exact entered amount via UPI, then submit the donation along with a UPI transaction reference (UTR/Transaction ID) that admins can verify before confirming.",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-update-user-facing-donation-text-to-reflect-the-new-required-mobile-number-and-upi-payment-requirement-using-clear-english-instructions",
      "title": "Update user-facing donation text to reflect the new required mobile number and UPI payment requirement using clear English instructions.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-dedicated-admin-portal-entry-route-at-admin-that-provides-an-app-like-admin-experience-separate-from-the-public-site-pages-and-require-authentication-admin-authorization-for-all-admin-routes",
      "title": "Create a dedicated Admin Portal entry route at `/admin` that provides an app-like admin experience separate from the public site pages, and require authentication + admin authorization for all `/admin/*` routes.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-distinct-admin-portal-layout-for-admin-pages-that-feels-like-a-separate-application-admin-only-navigation-reduced-public-site-distractions-while-keeping-the-existing-public-sitelayout-unchanged-for-non-admin-routes",
      "title": "Implement a distinct Admin Portal layout for `/admin/*` pages that feels like a separate application (admin-only navigation, reduced public-site distractions) while keeping the existing public SiteLayout unchanged for non-admin routes.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-portal-landing-dashboard-page-e-g-admin-or-admin-dashboard-that-summarizes-key-admin-actions-and-provides-one-tap-entry-points-to-manage-donations-and-spending",
      "title": "Add an Admin Portal landing/dashboard page (e.g., `/admin` or `/admin/dashboard`) that summarizes key admin actions and provides one-tap entry points to manage Donations and Spending.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-upi-configuration-to-use-the-provided-trust-upi-id-exactly-as-anwarulhaq-wnu-org-fam-so-the-upi-intent-link-and-the-displayed-upi-id-match-the-trust-s-payment-handle",
      "title": "Update the frontend UPI configuration to use the provided trust UPI ID exactly as: `anwarulhaq-wnu.org@fam`, so the UPI intent link and the displayed UPI ID match the trust’s payment handle.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-visible-scan-to-pay-qr-section-to-the-donation-flow-that-renders-the-user-uploaded-qr-image-on-the-donate-page-and-or-within-the-upi-payment-step-using-a-static-asset-stored-under-frontend-public-assets-generated-without-serving-the-image-from-the-backend",
      "title": "Add a visible “Scan to Pay” QR section to the donation flow that renders the user-uploaded QR image on the Donate page and/or within the UPI payment step, using a static asset stored under `frontend/public/assets/generated`, without serving the image from the backend.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-user-facing-donation-instructions-remain-in-clear-english-and-explicitly-mention-that-donors-can-either-scan-the-qr-code-or-use-the-upi-id-and-that-they-must-enter-the-utr-after-payment-to-submit-the-donation-for-verification",
      "title": "Ensure user-facing donation instructions remain in clear English and explicitly mention that donors can either scan the QR code or use the UPI ID, and that they must enter the UTR after payment to submit the donation for verification.",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-short-clear-english-message-for-donors-on-the-donate-flow-explaining-the-upi-payment-step-donors-should-either-scan-the-qr-code-or-use-the-upi-id-to-pay-the-exact-amount-then-enter-their-12-digit-utr-transaction-id-to-submit-the-donation-for-admin-verification-keep-the-message-brief-1-2-sentences-and-place-it-in-a-prominent-location-in-the-donation-flow-e-g-within-the-existing-upi-payment-section-header-description-and-or-near-the-how-it-works-block-on-the-donate-page",
      "title": "Add a short, clear English message for donors on the Donate flow explaining the UPI payment step: donors should either scan the QR code or use the UPI ID to pay the exact amount, then enter their 12-digit UTR/Transaction ID to submit the donation for admin verification. Keep the message brief (1–2 sentences) and place it in a prominent location in the donation flow (e.g., within the existing UPI payment section header/description and/or near the “How it works” block on the Donate page).",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-visible-thank-you-note-section-on-the-public-donate-page-that-thanks-donors-for-supporting-why-not-us-and-reassures-them-that-donations-are-verified-and-recorded-transparently-place-it-within-frontend-src-pages-donatepage-tsx-near-the-existing-donation-process-content-so-it-is-visible-without-completing-the-form",
      "title": "Add a visible thank-you note section on the public Donate page that thanks donors for supporting “Why Not Us ?” and reassures them that donations are verified and recorded transparently; place it within `frontend/src/pages/DonatePage.tsx` near the existing “Donation Process” content so it is visible without completing the form.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-show-a-post-submission-thank-you-message-in-the-donation-form-ui-after-a-successful-donation-submission-in-frontend-src-components-donate-donationform-tsx-the-message-must-be-persistent-on-the-page-not-only-a-toast-and-should-include-a-short-english-thank-you-note-and-a-reminder-that-the-admin-will-verify-the-payment-before-it-appears-on-the-public-ledger",
      "title": "Show a post-submission thank-you message in the donation form UI after a successful donation submission in `frontend/src/components/donate/DonationForm.tsx`; the message must be persistent on the page (not only a toast) and should include a short English thank-you note and a reminder that the admin will verify the payment before it appears on the public ledger.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-donate-flow-step-2-payment-confirmation-ui-to-collect-only-the-donor-s-upi-transaction-id-utr-12-digits-and-remove-the-separate-upi-reference-token-input-field-and-any-related-explanatory-text",
      "title": "Update the Donate flow Step 2 (Payment Confirmation) UI to collect ONLY the donor’s UPI Transaction ID / UTR (12 digits) and remove the separate “UPI Reference / Token” input field and any related explanatory text.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-update-frontend-donation-submission-logic-in-frontend-src-components-donate-donationform-tsx-to-stop-validating-collecting-and-sending-any-upitoken-value-only-send-utr-as-the-payment-reference",
      "title": "Update frontend donation submission logic in `frontend/src/components/donate/DonationForm.tsx` to stop validating, collecting, and sending any `upiToken` value; only send `utr` as the payment reference.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-update-admin-donation-review-ui-to-remove-display-of-upi-token-and-show-only-the-utr-as-the-payment-reference-used-for-verification-e-g-in-frontend-src-pages-admin-admindonationspage-tsx",
      "title": "Update admin donation review UI to remove display of `UPI Token` and show only the UTR as the payment reference used for verification (e.g., in `frontend/src/pages/admin/AdminDonationsPage.tsx`).",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-regenerate-align-the-frontend-backend-type-bindings-the-frontend-src-backend-generated-types-and-update-any-react-query-hooks-usages-so-the-app-builds-cleanly-after-removing-upitoken-from-donation-records-inputs",
      "title": "Regenerate/align the frontend backend type bindings (the `frontend/src/backend` generated types) and update any React Query hooks/usages so the app builds cleanly after removing `upiToken` from donation records/inputs.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-mobile-donation-submission-failures-by-normalizing-and-validating-user-inputs-phone-amount-utr-in-the-donate-form-before-calling-the-backend-so-common-mobile-input-patterns-spaces-hyphens-accidental-formatting-do-not-cause-transactions-to-fail",
      "title": "Fix mobile donation submission failures by normalizing and validating user inputs (phone, amount, UTR) in the Donate form before calling the backend, so common mobile input patterns (spaces, hyphens, accidental formatting) do not cause transactions to fail.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-mobile-upi-payment-launch-more-reliable-by-handling-cases-where-upi-pay-deep-links-are-blocked-or-fail-to-open-while-still-allowing-donors-to-complete-payment-via-qr-scan-or-manual-upi-id-entry",
      "title": "Make the mobile UPI payment launch more reliable by handling cases where `upi://pay` deep links are blocked or fail to open, while still allowing donors to complete payment via QR scan or manual UPI ID entry.",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-upi-qr-code-section-so-the-qr-image-reliably-loads-and-is-usable-on-mobile-including-adding-an-explicit-error-fallback-ui-when-the-qr-image-fails-to-load-and-ensuring-the-app-is-using-the-expected-static-asset-path",
      "title": "Fix the UPI QR code section so the QR image reliably loads and is usable on mobile, including adding an explicit error/fallback UI when the QR image fails to load and ensuring the app is using the expected static asset path.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-replace-the-currently-used-upi-qr-static-asset-with-the-newly-uploaded-qr-image-while-keeping-the-frontend-code-and-path-unchanged-so-the-app-continues-to-load-the-qr-from-upi-qr-image-path-assets-generated-upi-qr-dim-800x800-jpg-as-used-by-frontend-src-utils-upiqrimage-ts-and-rendered-in-frontend-src-components-donate-upipaymentsection-tsx-store-the-replacement-file-at-frontend-public-assets-generated-upi-qr-dim-800x800-jpg",
      "title": "Replace the currently used UPI QR static asset with the newly uploaded QR image, while keeping the frontend code and path unchanged so the app continues to load the QR from `UPI_QR_IMAGE_PATH` (`/assets/generated/upi-qr.dim_800x800.jpg`) as used by `frontend/src/utils/upiQrImage.ts` and rendered in `frontend/src/components/donate/UpiPaymentSection.tsx`. Store the replacement file at `frontend/public/assets/generated/upi-qr.dim_800x800.jpg`.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Donation collection on the website for the trust (accept funds from supporters online).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Public transparency dashboard showing total funds available and how funds are used.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Public transaction ledger displaying all incoming/outgoing transactions and amounts.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Public donor/member listing showing details of each contributor and their contributions.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Global access support (website intended to be accessible worldwide).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Operate without an end date/time period (site intended to run indefinitely).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Implement persistent backend data models and APIs for a transparent trust ledger that stores: (a) donor profiles (at minimum: display name, optional contact fields, principal if signed in), (b) incoming donations, (c) outgoing spending/usage records, and (d) a computed trust balance derived from all records.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Use only the user-provided trust image asset across the site; do not generate or use any other images.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Display all monetary amounts in Indian Rupees (₹) instead of dollars.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Restrict donor contact number visibility: host/admin can view full number; other logged-in users see a masked number with last 4 digits hidden.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Show Total Views and Live Viewers count at the top of the website.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Post-donation donor notifications: send WhatsApp message and email (if provided) thanking donor and including donated amount, with the trust image attached.",
      "reqIds": [],
      "status": "blocked"
    },
    {
      "id": "AR-13",
      "summary": "Implement backend support for tracking (a) total site views and (b) currently live viewers, and expose a public API to fetch these metrics.",
      "reqIds": [
        "REQ-14"
      ],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Enforce donor phone-number privacy at the backend API level: when returning donor profiles to non-admin callers, do not expose the full phone number. Only admin callers may receive the full donor phone number; all other callers must receive a masked value (e.g., \"98765******\") or an equivalent representation that does not reveal the hidden digits.",
      "reqIds": [
        "REQ-17"
      ],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Persist the \"Total Views\" site metric so it represents the lifetime (website history) view count and does not reset on canister upgrade/redeploy.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Ensure the backend Total Views metric is persisted across canister upgrades/redeploys (lifetime counter) using stable state (e.g., stable vars and/or preupgrade/postupgrade persistence) so the value does not reset to 0 after an upgrade.",
      "reqIds": [
        "REQ-23"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Fix backend persistence and correctness of the Total Views metric so it represents a monotonic lifetime counter and does not reset unexpectedly on upgrade/redeploy.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-20",
      "summary": "Fix the backend build failure caused by the missing `Migration` module/type by adding `backend/migration.mo` (with the `LiveViewerSession` type used by `backend/main.mo`) and importing it in `backend/main.mo`, so the canister compiles and deploys successfully.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Make Total Views persistent and monotonic across canister upgrades by storing the Total Views counter in stable state and restoring it correctly on upgrade, so it does not reset to 0 after redeploy/upgrade.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-22",
      "summary": "Replace the current live-viewer counter implementation (`viewerConnected()`/`viewerDisconnected()` increment/decrement) with session-based, idempotent live-viewer tracking keyed by the browser tab session ID, including: a connect call that is idempotent per session, a heartbeat call that updates last-seen without incrementing counts, a disconnect call that removes the session, and automatic pruning of stale sessions so `currentLiveViewers` stays accurate.",
      "reqIds": [
        "REQ-29"
      ],
      "status": "pending"
    },
    {
      "id": "AR-23",
      "summary": "Set the default contact phone dial code/country code in forms to +91 (India).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-24",
      "summary": "Make donor mobile number mandatory in the donation flow (do not allow donations without a phone number).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Enable real online donations via UPI (support common UPI apps/handles) so entered donation amounts are actually paid through an online transaction flow.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Create a separate admin/host application (separate from the public website) that gives the admin full control/management access to the trust website (an \"app-like\" admin interface).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-27",
      "summary": "Admin portal: after admin login, allow admin to view details of members/visitors who viewed the site (viewer list/history), not just aggregated Total Views.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Admin portal: show details of currently live viewers (live viewing member details), beyond the aggregate Live Viewers count.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Implement admin login/identification so the site recognizes the admin user upon login and unlocks admin-only viewer/member detail pages.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Configure trust UPI payment details using provided UPI ID (anwarulhaq-wnu.org@fam) and display the trust’s UPI QR code on the donation page for scan-to-pay.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Add a short, clear message on the Donate/UPI payment step explaining how donors should pay via UPI (scan QR or use UPI ID) and then enter the UTR/transaction reference to confirm/submit the donation for verification.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Add a thank-you note/message for donors on the donation page (visible after or alongside the donation flow).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Simplify Donation Step 2 payment details: require only UPI Transaction ID/UTR and remove the separate UPI reference token field.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Update the backend donation model and API to remove the `upiToken` field and make `utr` the only required payment reference for donations.",
      "reqIds": [
        "REQ-52"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Replace the currently used UPI QR code static asset with the newly uploaded QR image so the Donate flow “Scan to pay with any UPI app” QR reliably scans in common UPI apps. The app must continue to load the QR from `UPI_QR_IMAGE_PATH` (`/assets/generated/upi-qr.dim_800x800.jpg`) as used by `frontend/src/components/donate/UpiPaymentSection.tsx` and `frontend/src/utils/upiQrImage.ts`.",
      "reqIds": [
        "REQ-55"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Why Not Us ?",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}